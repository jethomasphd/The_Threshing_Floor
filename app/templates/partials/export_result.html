<!-- Export result partial â€” swapped into #export-result after export -->
{% if success %}
<div class="flex items-start gap-3 p-4 rounded" style="background: rgba(74, 155, 110, 0.1); border-left: 3px solid var(--success);">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-success flex-shrink-0 mt-0.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
  <div class="flex-1">
    <h3 class="font-body text-sm font-semibold text-success mb-1">Export Successful</h3>
    <p class="text-bone-muted text-sm mb-2" style="line-height: 1.5;">
      Your data has been bundled with full provenance documentation.
    </p>

    <!-- File details -->
    <div class="flex flex-wrap gap-3 mb-3">
      {% if zip_filename %}
      <span class="tag">
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8Z"/><polyline points="14 2 14 8 20 8"/></svg>
        {{ zip_filename }}
      </span>
      {% endif %}
      {% if file_size %}
      <span class="tag">{{ file_size }}</span>
      {% endif %}
      {% if format_display %}
      <span class="badge badge-ember">{{ format_display | upper }}</span>
      {% endif %}
      {% if export_record and export_record.anonymized %}
      <span class="badge badge-success">Anonymized</span>
      {% endif %}
      {% if export_record and export_record.includes_comments %}
      <span class="badge badge-ash">With Comments</span>
      {% endif %}
    </div>

    <!-- Provenance badge -->
    <div class="flex items-center gap-2 mb-3 p-2 rounded" style="background: rgba(201, 162, 39, 0.08); border: 1px solid rgba(201, 162, 39, 0.15);">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--ember);"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      <span class="text-xs font-body" style="color: var(--ember);">Provenance document included (provenance.txt)</span>
    </div>

    <!-- Download button -->
    {% if export_record %}
    <a href="/api/glean/download/{{ export_record.id }}" class="btn btn-primary btn-sm">
      <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
      Download ZIP
    </a>
    {% endif %}
  </div>
</div>

<!-- Refresh the exports list -->
<script>
  // Trigger a refresh of the previous exports table
  var exportsList = document.getElementById('exports-list');
  if (exportsList) {
    htmx.trigger(exportsList, 'load');
  }
</script>

{% else %}
<div class="flex items-start gap-3 p-4 rounded" style="background: rgba(196, 75, 75, 0.1); border-left: 3px solid var(--error);">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-error flex-shrink-0 mt-0.5"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
  <div>
    <h3 class="font-body text-sm font-semibold text-error mb-1">Export Failed</h3>
    <p class="text-bone-muted text-sm mb-0" style="line-height: 1.5;">{{ error_message }}</p>
  </div>
</div>
{% endif %}
