<!-- Saved Query Card â€” used in dashboard and query list partials -->
<div class="saved-query-card" id="saved-query-{{ query.id }}">
  <div class="flex items-start justify-between gap-2 mb-2">
    <div class="min-w-0">
      <h4 class="font-body font-medium text-bone truncate" style="font-size:0.9375rem;">{{ query.name }}</h4>
      {% if query.description %}
      <p class="text-xs text-ash mt-0.5 mb-0 line-clamp-2">{{ query.description }}</p>
      {% endif %}
    </div>
  </div>

  <div class="flex flex-wrap gap-2 mb-3">
    <span class="tag">
      <i data-lucide="hash" style="width:12px;height:12px;"></i>
      r/{{ query.subreddit }}
    </span>
    <span class="tag">{{ query.sort }}</span>
    {% if query.sort in ['top', 'controversial'] %}
    <span class="tag">{{ query.time_filter }}</span>
    {% endif %}
    <span class="tag">
      <span class="font-mono">{{ query.limit }}</span> posts
    </span>
    {% if query.include_comments %}
    <span class="tag">
      <i data-lucide="message-circle" style="width:12px;height:12px;"></i>
      depth {{ query.comment_depth }}
    </span>
    {% endif %}
    {% if query.query %}
    <span class="tag">
      <i data-lucide="search" style="width:12px;height:12px;"></i>
      {{ query.query }}
    </span>
    {% endif %}
  </div>

  {% if query.last_run_at %}
  <p class="text-xs text-ash mb-3">Last run: {{ query.last_run_at.strftime('%b %d, %Y at %H:%M') }} UTC</p>
  {% endif %}

  <div class="flex items-center gap-2">
    <button
      class="btn btn-primary btn-sm flex-1"
      hx-post="/api/queries/{{ query.id }}/run"
      hx-target="#saved-query-{{ query.id }}"
      hx-swap="outerHTML"
      title="Re-run this query"
    >
      <i data-lucide="play" style="width:14px;height:14px;"></i>
      Re-run
    </button>
    <button
      class="btn btn-ghost btn-sm"
      hx-delete="/api/queries/{{ query.id }}"
      hx-target="#saved-query-{{ query.id }}"
      hx-swap="outerHTML"
      hx-confirm="Delete saved query '{{ query.name }}'?"
      title="Delete this query"
      style="color: var(--error);"
    >
      <i data-lucide="trash-2" style="width:14px;height:14px;"></i>
    </button>
  </div>
</div>
