<!-- Post preview cards — swapped into #posts-preview by HTMX -->
{% if posts %}
<div class="flex flex-col gap-3">
  {% for post in posts %}
  <div class="card" style="padding: 1rem;">
    <div class="flex items-start gap-3">
      <!-- Score column -->
      <div class="flex flex-col items-center flex-shrink-0" style="min-width: 48px;">
        <i data-lucide="arrow-up" class="w-3.5 h-3.5 text-ash"></i>
        <span class="font-mono text-sm text-ember font-medium">{{ format_score(post.score) }}</span>
      </div>

      <!-- Post content -->
      <div class="min-w-0 flex-1">
        <h4 class="text-bone font-body text-sm font-medium mb-1" style="line-height: 1.4;">
          <a href="https://www.reddit.com{{ post.permalink }}"
             target="_blank"
             rel="noopener noreferrer"
             class="hover:text-ember-glow"
             style="color: var(--bone); text-decoration: none;">
            {{ post.title }}
          </a>
        </h4>

        {% if post.selftext %}
        <p class="text-bone-muted text-xs mb-2" style="line-height: 1.5;">
          {{ post.selftext[:200] }}{% if post.selftext|length > 200 %}...{% endif %}
        </p>
        {% endif %}

        <!-- Post meta -->
        <div class="flex flex-wrap items-center gap-3 text-xs text-ash">
          <span class="font-mono" title="Author">
            <i data-lucide="user" class="w-3 h-3 inline-block" style="vertical-align: -2px;"></i>
            {{ post.author }}
          </span>
          <span class="font-mono" title="{{ post.num_comments }} comments">
            <i data-lucide="message-square" class="w-3 h-3 inline-block" style="vertical-align: -2px;"></i>
            {{ post.num_comments }}
          </span>
          <span class="font-mono" title="{{ format_datetime(post.created_utc) }}">
            <i data-lucide="clock" class="w-3 h-3 inline-block" style="vertical-align: -2px;"></i>
            {{ format_relative_time(post.created_utc) }}
          </span>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

{% if posts|length >= 10 %}
<p class="text-ash text-xs text-center mt-3 font-mono">
  Showing {{ posts|length }} posts — collect from this subreddit to gather more
</p>
{% endif %}
{% else %}
<div class="flex flex-col items-center py-6 text-center">
  <i data-lucide="inbox" class="w-8 h-8 text-ash mb-2" style="opacity: 0.5;"></i>
  <p class="text-bone-muted text-sm">No posts found for this sort method.</p>
</div>
{% endif %}
