<!-- Threaded comment display partial â€” loaded into comment expansion rows -->
{% if comments and comments|length > 0 %}
<div class="harvest-comments-container">
  <div class="harvest-comments-header">
    <i data-lucide="message-square" class="w-3.5 h-3.5 text-ember"></i>
    <span class="font-body text-xs text-bone-muted">{{ comments|length }} comment{{ 's' if comments|length != 1 else '' }} collected</span>
  </div>
  <div class="harvest-comments-list">
    {% for comment in comments %}
    <div class="harvest-comment" style="padding-left: {{ comment.depth * 1.5 }}rem;">
      <div class="harvest-comment-inner">
        <div class="harvest-comment-meta">
          <span class="font-mono text-xs text-bone-muted" title="Author">{{ comment.author }}</span>
          <span class="text-ash" style="font-size: 0.625rem;">|</span>
          <span class="font-mono text-xs {% if comment.score > 0 %}text-ember-dim{% elif comment.score < 0 %}text-error{% else %}text-ash{% endif %}" title="Score">
            {{ comment.score }} pt{{ 's' if comment.score != 1 else '' }}
          </span>
          <span class="text-ash" style="font-size: 0.625rem;">|</span>
          <span class="font-mono text-xs text-ash" title="{{ format_datetime(comment.created_utc) }}">
            {{ format_relative_time(comment.created_utc) }}
          </span>
        </div>
        <div class="harvest-comment-body font-body text-xs text-bone" style="line-height: 1.5;">
          {{ comment.body[:500] }}{% if comment.body|length > 500 %}
          <span class="text-ash">... [truncated]</span>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% else %}
<div class="harvest-comments-container">
  <div class="harvest-comments-empty">
    <i data-lucide="message-square-off" class="w-4 h-4 text-ash" style="opacity: 0.5;"></i>
    <span class="text-ash text-xs">No comments were collected for this post.</span>
  </div>
</div>
{% endif %}
